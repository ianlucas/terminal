function o(e,t){let n=document.createElement(e);return n.className=t,n}function a(e){s(document.body,e)}function s(e,t){e.appendChild(t)}function u(e,t,n){e.setAttribute(t,n||t)}function p(e,t){e.removeAttribute(t)}function d(e,t){return e.hasAttribute(t)}function c(e){let t=()=>{e(),requestAnimationFrame(t)};t()}function v(e,t,n){let r=document.createElement(e);return r.innerHTML=n,r.className=t.join(" "),r.outerHTML}function l(e,t){return e.innerHTML===t}function h(e,t){e.innerHTML=t}function m(e,t,n){e.addEventListener(t,n)}function f(){let e=function(t,n){n&&(t=v("span",["bg",n],t)),e.value=(e.value||"")+t};return e}var b=class{constructor(t={}){this.root=o("div","root"),this.input=o("input","input"),this.inputWrapper=o("div","inputWrapper"),this.registeredCommands={__unknown__(){}},u(this.input,"placeholder",t.placeholder||"Type a command here..."),s(this.inputWrapper,this.input),a(this.root),a(this.inputWrapper),m(this.input,"keydown",this._handleKeydownEvent.bind(this))}render(t){c(()=>{let n=f();t(n),!l(this.root,n.value)&&h(this.root,n.value)})}on(t,n){this.registeredCommands[t]=n}async _handleKeydownEvent(t){if(t.key!=="Enter"||d(t.target,"disabled"))return;let n=t.target.value,r=n.split(" "),i=r.shift();u(t.target,"disabled"),this.registeredCommands[i]?await this.registeredCommands[i](r,n):this.registeredCommands.__unknown__(i,n),p(t.target,"disabled"),t.target.value="",t.target.focus()}},A=b;export{A as default};
