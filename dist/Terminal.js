var _=Object.freeze({red:{textColor:"red"},green:{textColor:"green"},blue:{textColor:"blue"},orange:{textColor:"orange"},yellow:{textColor:"yellow"},aqua:{textColor:"aqua"},purple:{textColor:"purple"},white:{textColor:"white"}}),l=_;var w=Object.freeze({createElement(o,t){let e=document.createElement(o);return e.className=t,e},createElementString(o,t,e){let r=`<${o} class="${t}">`,i=`</${o}>`;return r+e+i},createState(o,t){let e={...o,_commandStream:""},r={set:(i,a,m)=>(i[a]=m,t(),!0)};return new Proxy(e,r)},appendTo(o,...t){t.forEach(e=>o.appendChild(e))}}),n=w;var u=class{constructor(){this._root=n.createElement("div","terminal-node"),this._screen=n.createElement("div","terminal-screen"),this._inputWrapper=n.createElement("span","terminal-input-wrapper"),this._input=n.createElement("input","terminal-input"),n.appendTo(this._inputWrapper,this._input),n.appendTo(this._root,this._screen,this._inputWrapper)}render(t){this._screen.innerHTML=t}attachInputHandler(t){this._input.addEventListener("keydown",async e=>{if(e.key!=="Enter")return;let r=this._input.value.split(" "),[i,...a]=r;this._input.disabled=!0,await t(i,a),this._input.disabled=!1,this._input.value="",this._input.focus()})}attachTo(t){n.appendTo(t,this._root)}},d=u;var c=class{constructor(){this._value="",this.write=this.write.bind(this),this.writenl=this.writenl.bind(this)}write(t,e={}){let r=[];e.backgroundColor&&r.push(`terminal-bg-${e.backgroundColor}`),e.textColor&&r.push(`terminal-tx-${e.textColor}`),this._value+=n.createElementString("span",r.join(" "),t)}writenl(t,e){this.write(`
`+t,e)}toString(){return this._value}},s=c;var p=class{constructor(t={}){this._renderFn=null,this._dom=new d,this._commands={_error:({writenl:e})=>e("Unknown command.",l.red),clear:({state:e})=>e._commandStream=""},this._state=n.createState(t,this._render.bind(this)),this._dom.attachInputHandler(this._handleInput.bind(this))}async _handleInput(t,e){if(!this._commands[t])return this._handleInput("_error",{command:t,...e});let r=new s;await this._commands[t]({command:t,args:e,state:this._state,write:r.write,writenl:r.writenl}),this._state._commandStream+=r.toString()}_render(){let t=new s;this._renderFn({write:t.write,writenl:t.writenl,state:this._state}),t.write(this._state._commandStream),this._dom.render(t.toString())}render(t){this._renderFn=t,this._render()}on(t,e){this._commands[t]=e}attachTo(t){this._dom.attachTo(t)}},f=p;var b=Object.freeze({red:{backgroundColor:"red"},green:{backgroundColor:"green"},blue:{backgroundColor:"blue"},orange:{backgroundColor:"orange"},yellow:{backgroundColor:"yellow"},aqua:{backgroundColor:"aqua"},purple:{backgroundColor:"purple"},white:{backgroundColor:"white"}}),h=b;export{h as Background,h as Color,f as Terminal};
